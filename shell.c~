#include "shell.h"

/**
 * main - Simple shell 0.1
 * @argc: Argument count
 * @argv: Argument vector
 *
 * Return: Exit status
 */
int main(int argc, char **argv)
{
char *line = NULL;
size_t n = 0;
ssize_t read;
pid_t pid;
int status;

(void)argc;

while (1)
{
if (isatty(STDIN_FILENO))
write(STDOUT_FILENO, "#cisfun$ ", 9);

read = getline(&line, &n, stdin);
if (read == -1)
{
free(line);
return (0);
}

if (line[read - 1] == '\n')
line[read - 1] = '\0';

if (line[0] == '\0')
continue;

pid = fork();
if (pid == -1)
{
perror(argv[0]);
}
else if (pid == 0)
{
char *args[] = {line, NULL};

if (execve(line, args, environ) == -1)
{
perror(argv[0]);
}
exit(EXIT_FAILURE);
}
else
{
waitpid(pid, &status, 0);
}
}
free(line);
return (0);
}
